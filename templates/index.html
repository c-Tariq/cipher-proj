{% extends "base.html" %}

{% block body %}
<div class="container">
    <h1>Welcome</h1>
    <p>Register if you're new, or log in if you have an account</p>
    
    <form id="auth-form" action="{{ url_for('login') }}" method="post">
        <input type="text" name="username" placeholder="Username" class="input-field" required>
        <input type="password" name="password" placeholder="Password" class="input-field" required>
        
        <br>
        
        <input type="submit" value="Login" class="btn btn-login" onclick="setActionForm('login')"/>
        <input type="button" value="Register" class="btn btn-register" onclick="setActionForm('register')"/>
    </form>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="error">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<script>
    function setActionForm(action){
        let form = document.getElementById("auth-form");
        if (action === 'login'){
            form.action = "{{ url_for('login') }}";
            form.method = 'post';
            form.submit();
        } else if (action === 'register'){
            form.action = "{{ url_for('register') }}";
            form.method = 'post';
            form.submit();
        }
    }
</script>
{% endblock %}
